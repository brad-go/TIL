# [React] React를 사용하는 이유

![react img:dark](https://cdn.inflearn.com/wp-content/uploads/react.png)

## 목차

- [프론트앤드 라이브러리와 프레임워크의 등장](#1-프론트엔드-라이브러리와-프레임워크의-등장)
- [라이브러리와 프레임워크가 도와주는 것](#2-라이브러리-프레임워크가-무엇을-도와줄까)
- [왜 React를 사용할까?](#3-왜-리액트를-사용할까)

## 1. 프론트앤드 라이브러리와 프레임워크의 등장

프레임워크와 라이브러리가 등장하게 된 것은 웹 앱의 보편화 때문이다. 즉, 동적인 웹 페이지인 웹 앱을 보다 효율적으로 유지보수하고 관리하기 위해 등장하게 되었다. 동적인 웹 페이지인 웹 앱에 대해서 먼저 알아보자.

### 웹 앱(Web App)

웹 앱이란 웹 애플리케이션(Web Application)의 줄임말로 과거의 웹사이트들과 같이 HTML, CSS, JS파일들로 이루어 지지만 사이트가 **아닌 유저의 행동 흐름에 다라 웹페이지 구성을 달리하는 동적인 웹 페이지**를 의미한다. 우리가 이미 알고 있는 페이스북과 같은 웹 페이지들을 의미한다.

- 모바일 앱처럼 부드럽게 동작하고 사용성 유사
- 새로고침 없이 웹 탐색 가능 (SPA; Single Page Application)
- 사용자 인터랙션 처리를 위한 **많은 상태 변화** 필요

#### 장점

- 기본적으로 웹 기술이기 때문에 다양한 언어 포용 가능
- 네이티브 앱과 달리 설치할 필요없이 브라우저로 접근 가능
- 앱처럼 뛰어난 UX(사용자 경험)를 주고 이로 인한 웹사이트보다 비즈니스적 강점을 가짐(좋은 UX로 인한 구매율 증가 등)
- 모바일 앱으로 발행이 쉬움

#### 단점

- 모바일 기기의 하드웨어에 접근할 순 없기 때문에 센서, 카메라 등의 기능을 활용 할 수 없다.
- 브라우저에서 사용할 수 있도록 제공하는 API는 사용가능하나, 스마트폰 자체 운영체제에서 제공하는 API는 사용할 수 없다.

### React/Vue와 같은 프레임워크와 라이브러리

React와 Vue 같은 라이브러리/프레임워크는 이처럼 웹 앱에서 **대량의 사용자 인터랙션을 처리하고 이를 자연스러운 UI(유저 인터페이스)로 만들기 위해 등장**했다.

- 웹 앱을 쉽게 만들 수 있게 도와준다.
- 동적인 웹페이지를 효율적으로 유지보수 및 관리할 수 있게 해준다.

## 2. 라이브러리 / 프레임워크가 무엇을 도와줄까?

필요하다면 [브라우저의 렌더링 과정](https://d2.naver.com/helloworld/59361)을 먼저 읽어보자.

웹 앱이라 불릴만큼 프로젝트 규모가 커지고, 다양한 유저 인터랙션이 전달되면서 그만큼 DOM 요소에 변화가 필요해졌다. DOM 요소가 변화한다는 것은 렌더 트리의 재생성, 요소의 스타일 계산, 레이아웃 구성 등의 과정을 거쳐서 이루어진다. 이 과정들이 많을 수록 브라우저는 많은 연산이 필요해지고 전체 프로세스는 비효율성을 띠게 된다.
결국 라이브러리 혹은 프레임워크는 일반적으로 아래와 같은 목적을 가지고, 각각의 방식과 추구 방향을 가지고 개발에 도움을 주고 있다.

- DOM 관리와 상태 변화 관리를 최소화 해준다.
- 개발자가 기능 및 UI 개발에 집중할 수 있게 도와준다.

## 3. 왜 리액트를 사용할까?

### 3-1. 컴포넌트 단위 개발

컴포넌트는 UI를 구성하는 개별적인 뷰 단위를 의미한다. UI 개발을 레고라고 한다면, 컴포넌트는 블록 역할을 하게 된다. 이러한 블록들을 조립해 하나의 완성품을 만들 수 있게 해준다.

- UI를 동적으로 구축할 수 있도록 재사용 가능한 컴포넌트들로 구성할 수 있다.
- 이는 개발 시간과 비용을 절약하게 해준다.

:white_check_mark: 컴포넌트들을 조립되어 하나의 웹 앱이 만들어진다.

### 3-2. JSX

JSX(Javascript + XML)는 자바스크립트에 대한 확장 구문으로서, 리액트에서 element(요소)를 제공해 준다. 각 컴포넌트에서 `return`되는 react element를 JSX 문법으로 작성하는 것이다.

1. JSX를 컴포넌트에서 `return`
2. Babel은 React.createElement()로 컴파일 -> react element 객체를 `return`
3. 위의 `return`된 Virtual DOM의 객체 구성 형태와 비슷한 객체로 표현된다.
4. react element는 react DOM의 render함수에 의해서 실제 DOM 요소가 된다.
5. 리액트는 이 객체를 읽어들여서 DOM을 구성하고 항상 최신 상태를 유지한다.

:white_check_mark: 일반 브라우저의 DOM 객체와 달리 리액트 요소는 DOM 요소의 가상버전으로 가볍고, 불변적이며 상태를 가지지 않는다.

### 3-3. Virtual DOM

<details>
<summary><b>브라우저의 렌더링 과정(간략화)</b></summary>
<div markdown="1">

#### 1. DOM tree 생성

- 렌더 엔진이 HTML을 파싱하여 DOM 노드로 이루어진 tree 생성

#### 2. Render tree 생성

- css 파일과 inline 스타일을 파싱
- DOM + CSSOM = Render tree 생성
- 문서의 시각적인 구조를 나타낸다.

#### 3. Layout (reflow)

- viewport 내에서 생성된 각 노드들의 스크린에서 좌표에 따라 위치 결정
- position이나 size등이 여기서 결정

#### 4. Paint (repaint)

- 실제 화면에 그리기

</div>
</details><br>

유저의 인터랙션에 의해 **상태 변화(DOM의 변화)** 가 일어나면 [브라우저 작동 원리](https://d2.naver.com/helloworld/59361)에 의해 **랜더링 과정을 반복(render tree가 재생성**된다)하게 된다. 렌더 트리 생성 이후의 레이아웃(리플로우), 리페인트 과정을 반복한다. **Vitual DOM은 이러한 과정에 의해 발생하는 비효율성을 최소화하기 위해 탄생**하게 되었다.

DOM의 복사본과 같으며 HTML DOM의 추상화 버전이라고 볼 수 있다. 실제 DOM이 가지고 있는 api는 가지고 있지 않다. 변화가 일어난 것을 적용한 후에 최종 변화를 DOM에 적용시킨다.

:white_check_mark: Virtual DOM에 변경사항이 반영되면 원본 DOM에 필요한 변화만 반영되어서 전체의 DOM을 바꾸지 않고도 필요한 UI의 업데이트를 적용할 수 있다.

#### Virtual DOM의 동작 원리

Virtual DOM에 HTML가 코드가 있을때, 사실은 자바스크립트 객체로 표현된다. 그리고 이러한 처리는 실제 DOM이 아닌 **메모리 상에서 동작**하기 때문에 훨씬 더 *빠르게 동작*한다. 그리고 **실제 렌더링이 되지 않기 때문**에 연산 비용이 적다! 모든 요소의 변화를 바로바로 적용하는 것이 아니라 모든 변화를 하나로 묶어서 한 번만 실행시킨다. **연산횟수를 줄일 수 있기 때문에 실제 DOM 리렌더링에 비해서 효율적**이다.

:white_check_mark: Virtual DOM은 DOM fragment의 변화를 묶어서 적용한 다음 기존 DOM에 던져주는 과정을 자동화 & 추상화 한 것이다.

따라서 Virtual DOM은 다음과 같이 이야기 할 수 있다.

:white_check_mark: UI와 가상적인 표현을 메모리에 저장하고 React DOM과 같은 라이브러리에 의해 실제 DOM과 동기화 된다.

### 3-4. 단방향 데이터 흐름

쉽게 말해 부모로부터 자식으로만 데이터 전달이 가능하다. 이는 유지보수나 컴포넌트의 재사용을 쉽게 만든다. 이러한 단순한 데이터 흐름은 이해하기 쉽고 관리하기 편하게 해준다.

### 3-5. 수많은 커뮤니티

개발을 하다보면 아무리 배웠다고 하더라도 막히는 부분이 생기기 마련이다. 그럴 때, 아무리 좋다더라도 사용자가 적다면 혼자 찾아서 해결하기 쉽지 않을 것이다. 그러나 React는 가장 대표적으로 사용하는 라이브러리로써 많은 자료를 쉽게 얻을 수 있다.

## 참고

- [브라우저는 어떻게 동작하는가?](https://d2.naver.com/helloworld/59361)
- [React를 사용하는 이유](https://velog.io/@youthfulhps/React-React%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0)
- [[React] React를 사용하는 이유](https://gurtn.tistory.com/96)
- [[10분 테코톡] 🥁 지그의 Virtual DOM](https://www.youtube.com/watch?v=PN_WmsgbQCo)
